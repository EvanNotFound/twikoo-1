import{_ as s,M as r,p as l,q as i,R as e,t as n,N as o,a1 as a}from"./framework-7db056f4.js";const c={},d=a('<h1 id="快速上手" tabindex="-1"><a class="header-anchor" href="#快速上手" aria-hidden="true">#</a> 快速上手</h1><p>Twikoo 分为云函数和前端两部分，部署时请注意保持二者版本一致。</p><ul><li><a href="#%E4%BA%91%E5%87%BD%E6%95%B0%E9%83%A8%E7%BD%B2">云函数部署</a>有 5 种方式，<a href="#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2">一键部署</a>、<a href="#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2">手动部署</a>、<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%A8%E7%BD%B2">命令行部署</a>、<a href="#vercel-%E9%83%A8%E7%BD%B2">Vercel 部署</a>和<a href="#%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2">私有部署</a>。</li><li><a href="#%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2">前端部署</a>有 2 种方式，如果您的网站主题支持 Twikoo，您只需在配置文件中指定 Twikoo 即可；如果您的网站主题不支持 Twikoo，您需要修改源码手动引入 Twikoo 的 js 文件并初始化。</li></ul><h2 id="云函数部署" tabindex="-1"><a class="header-anchor" href="#云函数部署" aria-hidden="true">#</a> 云函数部署</h2><table><thead><tr><th><div style="width:6em;">部署方式</div></th><th>描述</th></tr></thead><tbody><tr><td><a href="#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2">一键部署</a></td><td>[ 不建议 ] 虽然方便，但是仅支持按量计费环境——也就是说，<strong>一键部署的环境，当免费资源用尽后，将会产生费用</strong>。且按量计费环境无法切换为包年包月环境。免费额度数据库读操作数只有 500 次 / 天，<strong>无法支撑 Twikoo 的运行需求</strong>。</td></tr><tr><td><a href="#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2">手动部署</a></td><td>[ 建议 ] 手动部署到腾讯云云开发环境，在中国大陆访问速度较快。由于基础版 1 已从 0 元涨价至 6.9 元 / 月，需要付费购买环境才能部署。</td></tr><tr><td><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%A8%E7%BD%B2">命令行部署</a></td><td>[ 不建议 ] 仅针对有 Node.js 经验的开发者。</td></tr><tr><td><a href="#vercel-%E9%83%A8%E7%BD%B2">Vercel 部署</a></td><td>[ 建议 ] 适用于想要免费部署的用户，在中国大陆访问速度较慢。</td></tr><tr><td><a href="#%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2">私有部署</a></td><td>[ 建议 ] 适用于有服务器的用户，需要自行申请 HTTPS 证书。</td></tr></tbody></table><h3 id="一键部署" tabindex="-1"><a class="header-anchor" href="#一键部署" aria-hidden="true">#</a> 一键部署</h3>',6),h=e("br",null,null,-1),p={href:"https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&appUrl=https%3A%2F%2Fgithub.com%2Fimaegoo%2Ftwikoo&branch=main",target:"_blank",rel:"noopener noreferrer"},u=e("img",{src:"https://main.qcloudimg.com/raw/67f5a389f1ac6f3b4d04c7256438e44f.svg",alt:"部署到云开发"},null,-1),_={href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"},m={href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"},k=e("h3",{id:"手动部署",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#手动部署","aria-hidden":"true"},"#"),n(" 手动部署")],-1),g=e("p",null,"如果您打算部署到一个现有的云开发环境，请直接从第 3 步开始。",-1),b={href:"https://curl.qcloud.com/KnnJtUom",target:"_blank",rel:"noopener noreferrer"},f=a('<div class="custom-container tip"><p class="custom-container-title">提示</p><ul><li>推荐创建上海环境。如选择广州环境，需要在 <code>twikoo.init()</code> 时额外指定环境 <code>region: &quot;ap-guangzhou&quot;</code></li><li>环境名称自由填写</li><li>推荐选择计费方式<code>包年包月</code>，套餐版本<code>基础版 1</code>，超出免费额度不会收费</li><li>如果提示选择“应用模板”，请选择“空模板”</li></ul></div>',1),v={start:"2"},x={href:"https://console.cloud.tencent.com/tcb/",target:"_blank",rel:"noopener noreferrer"},w=e("br",null,null,-1),E={href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"},y={href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"},B={href:"https://console.cloud.tencent.com/tcb/scf/index",target:"_blank",rel:"noopener noreferrer"},A=e("li",null,[n("函数名称请填写："),e("code",null,"twikoo"),n("，创建方式请选择："),e("code",null,"空白函数"),n("，运行环境请选择："),e("code",null,"Nodejs 10.15"),n("，函数内存请选择："),e("code",null,"128MB"),n("，点击“下一步”")],-1),T=e("li",null,"清空输入框中的示例代码，复制以下代码、粘贴到“函数代码”输入框中，点击“确定”",-1),D=a(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>main <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;twikoo-func&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="8"><li>创建完成后，点击“twikoo&quot;进入云函数详情页，进入“函数代码”标签，点击“文件 - 新建文件”，输入 <code>package.json</code>，回车</li><li>复制以下代码、粘贴到代码框中，点击“保存并安装依赖”</li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;twikoo-func&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.6.8&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="命令行部署" tabindex="-1"><a class="header-anchor" href="#命令行部署" aria-hidden="true">#</a> 命令行部署</h3>`,4),j={class:"custom-container warning"},C=e("p",{class:"custom-container-title"},"注意",-1),N={href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"},q=e("li",null,"请将命令、代码中“您的环境id”替换为您自己的环境id",-1),V=e("li",null,"第 7 步会弹出浏览器要求授权，需在有图形界面的系统下进行",-1),I=e("li",null,[n("请勿在 Termux 下操作。虽然可以部署成功，但是使用时会报错 "),e("code",null,"[FUNCTIONS_EXECUTE_FAIL] Error: EACCES: permission denied, open '/var/user/index.js'")],-1),H=e("p",null,"如果您打算部署到一个现有的云开发环境，请直接从第 3 步开始。",-1),O={href:"https://curl.qcloud.com/KnnJtUom",target:"_blank",rel:"noopener noreferrer"},M={href:"https://console.cloud.tencent.com/tcb/",target:"_blank",rel:"noopener noreferrer"},F=e("br",null,null,-1),P={href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"},S={href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"},G=e("li",null,"克隆本仓库",-1),R=a(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/imaegoo/twikoo.git <span class="token comment"># 或 git clone https://e.coding.net/imaegoo/twikoo/twikoo.git</span>
<span class="token builtin class-name">cd</span> twikoo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,1),W={href:"https://github.com/imaegoo/twikoo/releases",target:"_blank",rel:"noopener noreferrer"},z=e("br",null,null,-1),K={href:"https://imaegoo.coding.net/public/twikoo/twikoo/git",target:"_blank",rel:"noopener noreferrer"},L=a(`<ol start="6"><li>安装依赖项</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> <span class="token function">yarn</span> <span class="token comment"># 已安装 yarn 可以跳过此步</span>
<span class="token function">yarn</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>授权云开发环境（此命令会弹出浏览器要求授权，需在有图形界面的系统下进行）</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> run login
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="8"><li>自动部署</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> deploy <span class="token parameter variable">-e</span> 您的环境id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="vercel-部署" tabindex="-1"><a class="header-anchor" href="#vercel-部署" aria-hidden="true">#</a> Vercel 部署</h3><div class="custom-container warning"><p class="custom-container-title">注意</p><p>Vercel 部署的环境需配合 1.4.0 以上版本的 twikoo.js 使用</p></div>`,8),U={href:"https://www.bilibili.com/video/BV1Fh411e7ZH",target:"_blank",rel:"noopener noreferrer"},X={href:"https://www.mongodb.com/cloud/atlas/register",target:"_blank",rel:"noopener noreferrer"},$=e("li",null,[n("创建免费 MongoDB 数据库，区域推荐选择 "),e("code",null,"AWS / N. Virginia (us-east-1)")],-1),J={href:"https://vercel.com/support/articles/how-to-allowlist-deployment-ip-address",target:"_blank",rel:"noopener noreferrer"},Y=e("code",null,"<password>",-1),Z={href:"https://vercel.com/signup",target:"_blank",rel:"noopener noreferrer"},Q=e("br",null,null,-1),ee={href:"https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/server/vercel-min",target:"_blank",rel:"noopener noreferrer"},ne=e("img",{src:"https://vercel.com/button",alt:""},null,-1),te=e("li",null,[n("进入 Settings - Environment Variables，添加环境变量 "),e("code",null,"MONGODB_URI"),n("，值为第 3 步的数据库连接字符串")],-1),oe=e("li",null,"进入 Deployments , 然后在任意一项后面点击更多（三个点） , 然后点击Redeploy , 最后点击下面的Redeploy",-1),ae=e("li",null,"进入 Overview，点击 Domains 下方的链接，如果环境配置正确，可以看到 “Twikoo 云函数运行正常” 的提示",-1),se=e("li",null,[n("Vercel Domains（包含 "),e("code",null,"https://"),n(" 前缀，例如 "),e("code",null,"https://xxx.vercel.app"),n("）即为您的环境 id")],-1),re=e("h3",{id:"私有部署",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#私有部署","aria-hidden":"true"},"#"),n(" 私有部署")],-1),le=e("div",{class:"custom-container warning"},[e("p",{class:"custom-container-title"},"注意"),e("p",null,"私有部署的环境需配合 1.6.0 或以上版本的 twikoo.js 使用")],-1),ie={href:"https://nodejs.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"},ce=e("li",null,[n("安装 Twikoo server: "),e("code",null,"npm i -g tkserver")],-1),de=e("li",null,"根据需要配置环境变量",-1),he=a('<table><thead><tr><th>名称</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>TWIKOO_DATA</code></td><td>数据库存储路径</td><td><code>./data</code></td></tr><tr><td><code>TWIKOO_PORT</code></td><td>端口号</td><td><code>8080</code></td></tr><tr><td><code>TWIKOO_THROTTLE</code></td><td>IP 请求限流，当同一 IP 短时间内请求次数超过阈值将对该 IP 返回错误</td><td><code>250</code></td></tr></tbody></table><ol start="4"><li>启动 Twikoo server: <code>tkserver</code></li><li>访问 <code>http://服务端IP:8080</code></li><li>若能正常访问，服务端地址（包含 <code>http://</code> 和端口号，例如 <code>http://12.34.56.78:8080</code>）即为您的环境 id</li></ol><div class="custom-container tip"><p class="custom-container-title">提示</p><ol><li>Linux 服务器可以用 <code>nohup tkserver &gt;&gt; tkserver.log 2&gt;&amp;1 &amp;</code> 命令后台启动</li><li>强烈建议配置前置 nginx 服务器并配置 https 证书</li><li>数据在服务器上，请注意定期备份数据</li></ol></div><h3 id="私有部署-docker" tabindex="-1"><a class="header-anchor" href="#私有部署-docker" aria-hidden="true">#</a> 私有部署 (Docker)</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8080:8080 -v ${PWD}/data:/app/data -d imaegoo/twikoo\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="前端部署" tabindex="-1"><a class="header-anchor" href="#前端部署" aria-hidden="true">#</a> 前端部署</h2><h3 id="在-hexo-中使用" tabindex="-1"><a class="header-anchor" href="#在-hexo-中使用" aria-hidden="true">#</a> 在 Hexo 中使用</h3>',7),pe={id:"在-hexo-butterfly-主题使用",tabindex:"-1"},ue=e("a",{class:"header-anchor",href:"#在-hexo-butterfly-主题使用","aria-hidden":"true"},"#",-1),_e={href:"https://github.com/jerryc127/hexo-theme-butterfly",target:"_blank",rel:"noopener noreferrer"},me={href:"https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96",target:"_blank",rel:"noopener noreferrer"},ke={id:"在-hexo-keep-主题使用",tabindex:"-1"},ge=e("a",{class:"header-anchor",href:"#在-hexo-keep-主题使用","aria-hidden":"true"},"#",-1),be={href:"https://github.com/XPoet/hexo-theme-keep",target:"_blank",rel:"noopener noreferrer"},fe={href:"https://github.com/XPoet/hexo-theme-keep/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},ve={id:"在-hexo-volantis-主题使用",tabindex:"-1"},xe=e("a",{class:"header-anchor",href:"#在-hexo-volantis-主题使用","aria-hidden":"true"},"#",-1),we={href:"https://github.com/volantis-x/hexo-theme-volantis",target:"_blank",rel:"noopener noreferrer"},Ee={href:"https://github.com/volantis-x/hexo-theme-volantis/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},ye={id:"在-hexo-ayer-主题使用",tabindex:"-1"},Be=e("a",{class:"header-anchor",href:"#在-hexo-ayer-主题使用","aria-hidden":"true"},"#",-1),Ae={href:"https://github.com/Shen-Yu/hexo-theme-ayer",target:"_blank",rel:"noopener noreferrer"},Te={href:"https://github.com/Shen-Yu/hexo-theme-ayer/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},De={id:"在-hexo-next-主题使用",tabindex:"-1"},je=e("a",{class:"header-anchor",href:"#在-hexo-next-主题使用","aria-hidden":"true"},"#",-1),Ce={href:"https://github.com/next-theme/hexo-theme-next",target:"_blank",rel:"noopener noreferrer"},Ne=a(`<p><strong>暂不支持 NexT 8 以下的版本</strong>，请先升级到 NexT 8。然后在 Hexo 项目根目录执行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For NexT version &gt;= 8.0.0 &amp;&amp; &lt; 8.4.0</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-next-twikoo@1.0.0
<span class="token comment"># For NexT version &gt;= 8.4.0</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-next-twikoo@1.0.3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后在配置中添加</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">twikoo</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">envId</span><span class="token punctuation">:</span> xxxxxxxxxxxxxxx <span class="token comment"># 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</span>
  <span class="token comment"># region: ap-guangzhou # 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),qe={id:"在-hexo-matery-主题使用",tabindex:"-1"},Ve=e("a",{class:"header-anchor",href:"#在-hexo-matery-主题使用","aria-hidden":"true"},"#",-1),Ie={href:"https://github.com/blinkfox/hexo-theme-matery",target:"_blank",rel:"noopener noreferrer"},He={href:"https://github.com/blinkfox/hexo-theme-matery/blob/develop/_config.yml",target:"_blank",rel:"noopener noreferrer"},Oe={id:"在-hexo-icarus-主题使用",tabindex:"-1"},Me=e("a",{class:"header-anchor",href:"#在-hexo-icarus-主题使用","aria-hidden":"true"},"#",-1),Fe={href:"https://github.com/ppoffice/hexo-theme-icarus",target:"_blank",rel:"noopener noreferrer"},Pe={href:"https://www.anzifan.com/post/icarus_to_candy_2/",target:"_blank",rel:"noopener noreferrer"},Se={id:"在-hexo-mengd-萌典-主题使用",tabindex:"-1"},Ge=e("a",{class:"header-anchor",href:"#在-hexo-mengd-萌典-主题使用","aria-hidden":"true"},"#",-1),Re={href:"https://github.com/lete114/hexo-theme-MengD",target:"_blank",rel:"noopener noreferrer"},We={href:"https://github.com/lete114/hexo-theme-MengD/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},ze={id:"在-hexo-theme-fluid-主题使用",tabindex:"-1"},Ke=e("a",{class:"header-anchor",href:"#在-hexo-theme-fluid-主题使用","aria-hidden":"true"},"#",-1),Le={href:"https://github.com/fluid-dev/hexo-theme-fluid",target:"_blank",rel:"noopener noreferrer"},Ue={href:"https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA",target:"_blank",rel:"noopener noreferrer"},Xe={id:"在-hexo-theme-cards-主题使用",tabindex:"-1"},$e=e("a",{class:"header-anchor",href:"#在-hexo-theme-cards-主题使用","aria-hidden":"true"},"#",-1),Je={href:"https://github.com/ChrAlpha/hexo-theme-cards",target:"_blank",rel:"noopener noreferrer"},Ye={href:"https://github.com/ChrAlpha/hexo-theme-cards/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},Ze={id:"在-maupassant-hexo-主题使用",tabindex:"-1"},Qe=e("a",{class:"header-anchor",href:"#在-maupassant-hexo-主题使用","aria-hidden":"true"},"#",-1),en={href:"https://github.com/tufu9441/maupassant-hexo",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://github.com/tufu9441/maupassant-hexo/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"},tn=e("h3",{id:"通过-cdn-引入",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#通过-cdn-引入","aria-hidden":"true"},"#"),n(" 通过 CDN 引入")],-1),on={class:"custom-container tip"},an=e("p",{class:"custom-container-title"},"提示",-1),sn={href:"https://github.com/imaegoo/twikoo/issues/new",target:"_blank",rel:"noopener noreferrer"},rn=a(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tcomment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
twikoo<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">envId</span><span class="token operator">:</span> <span class="token string">&#39;您的环境id&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#tcomment&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 容器元素</span>
  <span class="token comment">// region: &#39;ap-guangzhou&#39;, // 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填</span>
  <span class="token comment">// path: location.pathname, // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数</span>
  <span class="token comment">// lang: &#39;zh-CN&#39;, // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/main/src/client/utils/i18n/index.js</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>建议使用 CDN 引入 Twikoo 的用户在链接地址上锁定版本，以免将来 Twikoo 升级时受到非兼容性更新的影响。</p></blockquote><h4 id="更换-cdn-镜像" tabindex="-1"><a class="header-anchor" href="#更换-cdn-镜像" aria-hidden="true">#</a> 更换 CDN 镜像</h4><p>如果遇到默认 CDN 加载速度缓慢，可更换其他 CDN 镜像。以下为可供选择的公共 CDN，其中一些 CDN 可能需要数天时间同步最新版本：</p><ul><li><code>https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js</code></li><li><code>https://lib.baomitu.com/twikoo/1.6.8/twikoo.all.min.js</code></li><li><code>https://cdn.bootcdn.net/ajax/libs/twikoo/1.6.8/twikoo.all.min.js</code></li><li><code>https://cdn.jsdelivr.net/npm/twikoo@1.6.8/dist/twikoo.all.min.js</code></li></ul><h2 id="开启管理面板-腾讯云环境" tabindex="-1"><a class="header-anchor" href="#开启管理面板-腾讯云环境" aria-hidden="true">#</a> 开启管理面板（腾讯云环境）</h2>`,6),ln={href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"},cn=e("li",null,"用文本编辑器打开私钥文件，复制全部内容",-1),dn=e("li",null,"点击评论窗口的“小齿轮”图标，粘贴私钥文件内容，并设置管理员密码",-1),hn=a('<p>配置好登录私钥之后无需留存私钥文件，请勿再次下载登录私钥，否则会导致之前配置的登录私钥失效。</p><h2 id="开启管理面板-vercel-环境" tabindex="-1"><a class="header-anchor" href="#开启管理面板-vercel-环境" aria-hidden="true">#</a> 开启管理面板（Vercel 环境）</h2><p>点击评论窗口的“小齿轮”图标，设置管理员密码</p><h2 id="版本更新" tabindex="-1"><a class="header-anchor" href="#版本更新" aria-hidden="true">#</a> 版本更新</h2><p>不同部署方式的更新方式也不同，请对号入座。更新部署成功后，请不要忘记同时更新前端的 Twikoo CDN 地址中的 <code>x.x.x</code> 数字版本号，使之与云函数版本号相同，然后部署网站。</p><h3 id="针对一键部署的更新方式" tabindex="-1"><a class="header-anchor" href="#针对一键部署的更新方式" aria-hidden="true">#</a> 针对一键部署的更新方式</h3>',6),pn={href:"https://console.cloud.tencent.com/tcb/apps/index",target:"_blank",rel:"noopener noreferrer"},un=e("ul",null,[e("li",null,[n("来源地址："),e("code",null,"https://github.com/imaegoo/twikoo/tree/main")]),e("li",null,[n("部署分支："),e("code",null,"main")])],-1),_n=e("p",null,"应用目录无需填写，点击“确定”，部署完成。",-1),mn=e("h3",{id:"针对手动部署的更新方式",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#针对手动部署的更新方式","aria-hidden":"true"},"#"),n(" 针对手动部署的更新方式")],-1),kn={href:"https://console.cloud.tencent.com/tcb/scf/index",target:"_blank",rel:"noopener noreferrer"},gn=e("code",null,"package.json",-1),bn=e("code",null,'"twikoo-func": "x.x.x"',-1),fn=a(`<div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果您的云函数是 1.0.0 之前的版本，因为 1.0.0 版本修改了部署步骤，请先参考<a href="#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2">手动部署</a>，从第 5 步开始，重新创建云函数，再按照此步骤更新。</p><p>如果升级后出现无法读取评论列表，云函数报错，请在函数编辑页面，删除 <code>node_modules</code> 目录（删除需要半分钟左右，请耐心等待删除完成），再点击保存并安装依赖。如果仍然不能解决，请删除并重新创建 Twikoo 云函数。</p></div><h3 id="针对命令行部署的更新方式" tabindex="-1"><a class="header-anchor" href="#针对命令行部署的更新方式" aria-hidden="true">#</a> 针对命令行部署的更新方式</h3><p>进入 Twikoo 源码目录，执行以下命令更新现有的云函数</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> deploy <span class="token parameter variable">-e</span> 您的环境id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="针对-vercel-部署的更新方式" tabindex="-1"><a class="header-anchor" href="#针对-vercel-部署的更新方式" aria-hidden="true">#</a> 针对 Vercel 部署的更新方式</h3>`,5),vn={href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"},xn=e("li",null,"点击 Connected Git Repository 下方的仓库地址",-1),wn=e("li",null,"打开 package.json，点击编辑",-1),En=e("li",null,[n("将 "),e("code",null,'"twikoo-vercel": "x.x.x"'),n(" 其中的版本号修改为最新版本号。点击 Commit changes")],-1),yn={href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"},Bn=a('<h3 id="针对私有部署的更新方式" tabindex="-1"><a class="header-anchor" href="#针对私有部署的更新方式" aria-hidden="true">#</a> 针对私有部署的更新方式</h3><ol><li>停止旧版本 <code>kill $(ps -ef | grep tkserver | grep -v &#39;grep&#39; | awk &#39;{print $2}&#39;)</code></li><li>拉取新版本 <code>npm i -g tkserver@latest</code></li><li>启动新版本 <code>nohup tkserver &gt;&gt; tkserver.log 2&gt;&amp;1 &amp;</code></li></ol><h3 id="针对私有部署-docker-的更新方式" tabindex="-1"><a class="header-anchor" href="#针对私有部署-docker-的更新方式" aria-hidden="true">#</a> 针对私有部署 (Docker) 的更新方式</h3><ol><li>拉取新版本 <code>docker pull imaegoo/twikoo</code></li><li>停止旧版本容器 <code>docker stop twikoo</code></li><li>删除旧版本容器 <code>docker rm twikoo</code></li><li><a href="#%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2-Docker">启动新版本容器</a></li></ol><h3 id="自动更新" tabindex="-1"><a class="header-anchor" href="#自动更新" aria-hidden="true">#</a> 自动更新</h3>',5),An={href:"https://github.com/MHuiG/twikoo-update",target:"_blank",rel:"noopener noreferrer"};function Tn(Dn,jn){const t=r("ExternalLinkIcon");return l(),i("div",null,[d,e("ol",null,[e("li",null,[n("点击以下按钮将 Twikoo 一键部署到云开发"),h,e("a",p,[u,o(t)])]),e("li",null,[n("进入"),e("a",_,[n("环境-登录授权"),o(t)]),n("，启用“匿名登录”")]),e("li",null,[n("进入"),e("a",m,[n("环境-安全配置"),o(t)]),n("，将网站域名添加到“WEB安全域名”")])]),k,g,e("ol",null,[e("li",null,[n("进入"),e("a",b,[n("云开发CloudBase"),o(t)]),n("活动页面，滚动到“新用户专享”部分，选择适合的套餐，点击“立即购买”，按提示创建好环境。")])]),f,e("ol",v,[e("li",null,[n("进入"),e("a",x,[n("云开发控制台"),o(t)]),w]),e("li",null,[n("进入"),e("a",E,[n("环境-登录授权"),o(t)]),n("，启用“匿名登录”")]),e("li",null,[n("进入"),e("a",y,[n("环境-安全配置"),o(t)]),n("，将网站域名添加到“WEB安全域名”")]),e("li",null,[n("进入"),e("a",B,[n("环境-云函数"),o(t)]),n("，点击“新建云函数”")]),A,T]),D,e("div",j,[C,e("ul",null,[e("li",null,[n("请确保您已经安装了 "),e("a",N,[n("Node.js"),o(t)])]),q,V,I])]),H,e("ol",null,[e("li",null,[n("进入"),e("a",O,[n("云开发CloudBase"),o(t)]),n("活动页面，滚动到“新用户专享”部分，选择适合的套餐（一般 0 元套餐即可），点击“立即购买”，按提示创建好环境。")]),e("li",null,[n("进入"),e("a",M,[n("云开发控制台"),o(t)]),F]),e("li",null,[n("进入"),e("a",P,[n("环境-登录授权"),o(t)]),n("，启用“匿名登录”")]),e("li",null,[n("进入"),e("a",S,[n("环境-安全配置"),o(t)]),n("，将网站域名添加到“WEB安全域名”")]),G]),R,e("blockquote",null,[e("p",null,[n("如果您没有安装 Git，也可以从 "),e("a",W,[n("Release"),o(t)]),n(" 页面下载最新的 Source code"),z,n(" 如果您所在的地区访问 Github 速度慢，也可以尝试另一个仓库地址："),e("a",K,[n("https://imaegoo.coding.net/public/twikoo/twikoo/git"),o(t)])])]),L,e("p",null,[e("a",U,[n("查看视频教程"),o(t)])]),e("ol",null,[e("li",null,[n("申请 "),e("a",X,[n("MongoDB"),o(t)]),n(" 账号")]),$,e("li",null,[n("在 Clusters 页面点击 CONNECT，按步骤设置允许所有 IP 地址的连接（"),e("a",J,[n("为什么？"),o(t)]),n("），创建数据库用户，并记录数据库连接字符串，请将连接字符串中的 "),Y,n(" 修改为数据库密码")]),e("li",null,[n("申请 "),e("a",Z,[n("Vercel"),o(t)]),n(" 账号")]),e("li",null,[n("点击以下按钮将 Twikoo 一键部署到 Vercel"),Q,e("a",ee,[ne,o(t)])]),te,oe,ae,se]),re,le,e("ol",null,[e("li",null,[n("服务端下载安装 "),e("a",ie,[n("Node.js"),o(t)])]),ce,de]),he,e("h4",pe,[ue,n(" 在 "),e("a",_e,[n("Hexo Butterfly"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",me,[n("Butterfly 安裝文檔(四) 主題配置-2"),o(t)]),n(" 进行配置")]),e("h4",ke,[ge,n(" 在 "),e("a",be,[n("Hexo Keep"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",fe,[n("hexo-theme-keep/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",ve,[xe,n(" 在 "),e("a",we,[n("Hexo Volantis"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",Ee,[n("hexo-theme-volantis/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",ye,[Be,n(" 在 "),e("a",Ae,[n("Hexo Ayer"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",Te,[n("hexo-theme-ayer/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",De,[je,n(" 在 "),e("a",Ce,[n("Hexo NexT"),o(t)]),n(" 主题使用")]),Ne,e("h4",qe,[Ve,n(" 在 "),e("a",Ie,[n("Hexo Matery"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",He,[n("hexo-theme-matery/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",Oe,[Me,n(" 在 "),e("a",Fe,[n("Hexo Icarus"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",Pe,[n("基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统"),o(t)]),n(" by 异次元de机智君💯")]),e("h4",Se,[Ge,n(" 在 "),e("a",Re,[n("Hexo MengD(萌典)"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",We,[n("hexo-theme-MengD/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",ze,[Ke,n(" 在 "),e("a",Le,[n("hexo-theme-fluid"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",Ue,[n("配置指南-评论"),o(t)]),n(" 进行配置")]),e("h4",Xe,[$e,n(" 在 "),e("a",Je,[n("hexo-theme-cards"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",Ye,[n("hexo-theme-cards/_config.yml"),o(t)]),n(" 进行配置")]),e("h4",Ze,[Qe,n(" 在 "),e("a",en,[n("maupassant-hexo"),o(t)]),n(" 主题使用")]),e("p",null,[n("请参考 "),e("a",nn,[n("maupassant-hexo/_config.yml"),o(t)]),n(" 进行配置")]),tn,e("div",on,[an,e("p",null,[n("如果您使用的博客主题不支持 Twikoo，并且您不知道如何引入 Twikoo，您可以"),e("a",sn,[n("在 Github 提交适配请求"),o(t)])])]),rn,e("ol",null,[e("li",null,[n("进入"),e("a",ln,[n("环境-登录授权"),o(t)]),n("，点击“自定义登录”右边的“私钥下载”，下载私钥文件")]),cn,dn]),hn,e("p",null,[n("登录"),e("a",pn,[n("环境-我的应用"),o(t)]),n("，输入")]),un,_n,mn,e("p",null,[n("登录"),e("a",kn,[n("环境-云函数"),o(t)]),n("，点击 twikoo，点击函数代码，打开 "),gn,n(" 文件，将 "),bn,n(" 其中的版本号修改为最新版本号，点击“保存并安装依赖”即可。")]),fn,e("ol",null,[e("li",null,[n("进入 "),e("a",vn,[n("Vercel 仪表板"),o(t)]),n(" - twikoo - Settings - Git")]),xn,wn,En,e("li",null,[n("部署会自动触发，可以回到 "),e("a",yn,[n("Vercel 仪表板"),o(t)]),n("，查看部署状态")])]),Bn,e("p",null,[n("考虑到可用性和安全性问题，Twikoo 没有实现自动更新，也没有计划实现自动更新。如果您希望实现自动更新，可以参考 MHuiG 基于 Github 工作流的 "),e("a",An,[n("twikoo-update"),o(t)]),n(" 的实现方式。")])])}const Nn=s(c,[["render",Tn],["__file","quick-start.html.vue"]]);export{Nn as default};
